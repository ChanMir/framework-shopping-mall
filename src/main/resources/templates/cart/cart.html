<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<th:block th:replace="fragments/header :: header"></th:block>
<head>
    <meta charset="UTF-8">
    <title>μ¥λ°”κµ¬λ‹</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>

<div class="container mt-4">

    <h2 class="text-center mb-4">μ¥λ°”κµ¬λ‹</h2>

    <div th:if="${#lists.isEmpty(cartItems)}" class="alert alert-warning text-center">
        μ¥λ°”κµ¬λ‹κ°€ λΉ„μ–΄ μμµλ‹λ‹¤.
    </div>

    <table class="table" th:if="${!#lists.isEmpty(cartItems)}">
        <thead>
        <tr>
            <th>μ΄λ―Έμ§€</th>
            <th>μƒν’λ…</th>
            <th>μλ‰</th>
            <th>κ°€κ²©</th>
            <th>μ‚­μ </th>
        </tr>
        </thead>

        <tbody>
        <tr th:each="cart : ${cartItems}">
            <td width="120">
                <img th:src="@{|/img/${cart.product.imageUrl}|}" class="img-fluid rounded">
            </td>
            <td th:text="${cart.product.name}"></td>
            <td th:text="${cart.quantity}"></td>
            <td th:text="|${cart.product.price * cart.quantity}μ›|"></td>

            <td>
                <a th:href="@{'/cart/remove/' + ${cart.id}}"
                   class="btn btn-danger btn-sm">μ‚­μ </a>
            </td>
        </tr>
        </tbody>
    </table>

    <div th:if="${!#lists.isEmpty(cartItems)}" class="d-flex justify-content-between mt-3">
        <a th:href="@{/product}" class="btn btn-secondary">μƒν’ κ³„μ† λ³΄κΈ°</a>
        <a th:href="@{/cart/clear}" class="btn btn-warning">μ¥λ°”κµ¬λ‹ λΉ„μ°κΈ°</a>
    </div>

    <!-- π”¥ μ£Όλ¬Έν•κΈ° λ²„νΌ μ¶”κ°€ (form POST λ°©μ‹) -->
    <div th:if="${!#lists.isEmpty(cartItems)}" class="mt-4">
        <a th:href="@{/order/checkout}" class="btn btn-success">μ£Όλ¬Έν•κΈ°</a>
    </div>

</div>

</body>
</html>
