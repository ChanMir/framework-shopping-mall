<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="fregments/header :: head"></head>
<body>

<th:block th:replace="fregments/header :: header"></th:block>

<div class="container mt-5 mb-5">

    <h2 class="page-title text-center">장바구니</h2>

    <!-- 장바구니 비었을 때 -->
    <div th:if="${#lists.isEmpty(cartItems)}"
         class="alert alert-warning text-center shadow-soft">
        현재 장바구니가 비어 있습니다.
    </div>

    <!-- 리스트 -->
    <div th:if="${!#lists.isEmpty(cartItems)}" class="card shadow-soft">
        <div class="card-body">

            <table class="table table-hover text-center align-middle">
                <thead class="table-light">
                <tr>
                    <th>이미지</th>
                    <th>상품명</th>
                    <th>수량</th>
                    <th>가격</th>
                    <th>삭제</th>
                </tr>
                </thead>

                <tbody>
                <tr th:each="cart : ${cartItems}">
                    <td width="120">
                        <img th:src="@{|/img/${cart.product.imageUrl}|}" class="img-fluid rounded" style="max-height:80px;">
                    </td>

                    <td th:text="${cart.product.name}"></td>

                    <td>
                        <span th:text="${cart.quantity}"></span>
                    </td>

                    <td th:text="|${cart.product.price * cart.quantity}원|"></td>

                    <td>
                        <a th:href="@{'/cart/remove/' + ${cart.id}}"
                           class="btn btn-danger btn-sm">삭제</a>
                    </td>
                </tr>
                </tbody>
            </table>

        </div>
    </div>

    <!-- 버튼 그룹 -->
    <div th:if="${!#lists.isEmpty(cartItems)}" class="d-flex justify-content-between mt-4">

        <a th:href="@{/product}" class="btn btn-secondary">
            상품 계속 보기
        </a>

        <div>
            <a th:href="@{/cart/clear}" class="btn btn-warning me-2">
                장바구니 비우기
            </a>

            <a th:href="@{/order/checkout}" class="btn btn-primary">
                주문하기
            </a>
        </div>

    </div>

</div>

<th:block th:replace="fregments/footer :: footer"></th:block>
</body>
</html>
